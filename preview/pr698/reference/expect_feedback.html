<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="
expect_feedback() is designed for use in the -tests chunk of interactive
learnr exercises. When used in a test chunk, it will evaluate the exercise
as if user_code were the user's submitted code, comparing the feedback
returned by the exercise's checking function and code with the expected
feedback values.
In other words, expect_feedback() will check that the user_code returns
the expected feedback. You may check that
the user code is marked as correct (or incorrect)
the feedback message matches the expected message
the feedback is of the expected type and location
additional attributes of the feedback, specified in ..., are as expected.


When used in a -tests chunk, it's best to include expect_feedback()
inside testthat::test_that() to provide a description of the behavior
being tested:
```{r add, exercise = TRUE}
1 + 1
```

```{r add-solution}
1 + 1
```

```{r add-check}
grade_this({
  pass_if_equal(2, &quot;That's right!&quot;)
  fail(&quot;Oops!&quot;)
})
```

```{r add-tests}
test_that(&quot;correct answer passes&quot;, {
  expect_feedback(
    1 + 1,
    correct = TRUE,
    message = &quot;That's right!&quot;
  )
})
test_that(&quot;incorrect answer&quot;, {
  expect_feedback(
    2 + 2,
    correct = FALSE,
    message = &quot;Oops!&quot;
  )
})
```
"><title>Does user code for an exercise return the expected feedback? — expect_feedback • learnr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><link href="../deps/_Source%20Sans%20Pro-0.4.1/font.css" rel="stylesheet"><link href="../deps/_Source%20Code%20Pro-0.4.1/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Does user code for an exercise return the expected feedback? — expect_feedback"><meta property="og:description" content="
expect_feedback() is designed for use in the -tests chunk of interactive
learnr exercises. When used in a test chunk, it will evaluate the exercise
as if user_code were the user's submitted code, comparing the feedback
returned by the exercise's checking function and code with the expected
feedback values.
In other words, expect_feedback() will check that the user_code returns
the expected feedback. You may check that
the user code is marked as correct (or incorrect)
the feedback message matches the expected message
the feedback is of the expected type and location
additional attributes of the feedback, specified in ..., are as expected.


When used in a -tests chunk, it's best to include expect_feedback()
inside testthat::test_that() to provide a description of the behavior
being tested:
```{r add, exercise = TRUE}
1 + 1
```

```{r add-solution}
1 + 1
```

```{r add-check}
grade_this({
  pass_if_equal(2, &quot;That's right!&quot;)
  fail(&quot;Oops!&quot;)
})
```

```{r add-tests}
test_that(&quot;correct answer passes&quot;, {
  expect_feedback(
    1 + 1,
    correct = TRUE,
    message = &quot;That's right!&quot;
  )
})
test_that(&quot;incorrect answer&quot;, {
  expect_feedback(
    2 + 2,
    correct = FALSE,
    message = &quot;Oops!&quot;
  )
})
```
"><meta property="og:image" content="https://pkgs.rstudio.com/learnr/learnr-social.png"><meta property="og:image:alt" content="learnr package"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@rstudio"><meta name="twitter:site" content="@rstudio"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><meta name="pkgdown-site-root" content="../"><script src="../snippets/ace/ace.js" type="text/javascript" charset="utf-8"></script><script src="../snippets/snippets.js" type="text/javascript" charset="utf-8"></script><style type="text/css">
.snippet {
  border: solid 1px #cccccc;
  margin-bottom: 12px;
  width: 100%;
}
</style></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-none"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">learnr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.10.1.9022</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/learnr.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/examples.html">Examples</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Learn learnr</h6>
    <a class="dropdown-item" href="../articles/exercises.html">Interactive Exercises</a>
    <a class="dropdown-item" href="../articles/questions.html">Interactive Questions</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Publish</h6>
    <a class="dropdown-item" href="../articles/publishing.html">Publishing Basics</a>
    <a class="dropdown-item" href="../articles/shinyapps-publishing.html">Publishing on shinyapps.io</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Customize</h6>
    <a class="dropdown-item" href="../articles/formats.html">Tutorial Formats</a>
    <a class="dropdown-item" href="../articles/multilang.html">Internationalization</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/index.html">More articles...</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rstudio/learnr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Does user code for an exercise return the expected feedback?</h1>
      <small class="dont-index">Source: <a href="https://github.com/rstudio/learnr/blob/HEAD/R/test_tutorial.R" class="external-link"><code>R/test_tutorial.R</code></a></small>
      <div class="d-none name"><code>expect_feedback.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a></p>
<p><code>expect_feedback()</code> is designed for use in the <code>-tests</code> chunk of interactive
learnr exercises. When used in a test chunk, it will evaluate the exercise
as if <code>user_code</code> were the user's submitted code, comparing the feedback
returned by the exercise's checking function and code with the expected
feedback values.</p>
<p>In other words, <code>expect_feedback()</code> will check that the <code>user_code</code> returns
the expected feedback. You may check that</p><ul><li><p>the user code is marked as <code>correct</code> (or incorrect)</p></li>
<li><p>the feedback message matches the expected <code>message</code></p></li>
<li><p>the feedback is of the expected <code>type</code> and <code>location</code></p></li>
<li><p>additional attributes of the feedback, specified in <code>...</code>, are as expected.</p></li>
</ul><p>When used in a <code>-tests</code> chunk, it's best to include <code>expect_feedback()</code>
inside <code><a href="https://testthat.r-lib.org/reference/test_that.html" class="external-link">testthat::test_that()</a></code> to provide a description of the behavior
being tested:</p>
<p></p><div class="sourceCode"><pre><code></code></pre><p></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">expect_feedback</span><span class="op">(</span>
  <span class="va">user_code</span>,
  correct <span class="op">=</span> <span class="cn">NULL</span>,
  message <span class="op">=</span> <span class="cn">NULL</span>,
  type <span class="op">=</span> <span class="cn">NULL</span>,
  location <span class="op">=</span> <span class="cn">NULL</span>,
  <span class="va">...</span>,
  perl <span class="op">=</span> <span class="cn">FALSE</span>,
  fixed <span class="op">=</span> <span class="cn">FALSE</span>,
  ignore.case <span class="op">=</span> <span class="cn">FALSE</span>,
  .exercise <span class="op">=</span> <span class="cn">NULL</span>,
  .envir <span class="op">=</span> <span class="cn">NULL</span>,
  .label <span class="op">=</span> <span class="cn">NULL</span>,
  .evaluate_global_setup <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>user_code</dt>
<dd><p>The code a user might have submitted to the exercise. This
code should be a single unquoted expression. If the user code requires
multiple expressions, it should be wrapped in curly braces (<code><a href="https://rdrr.io/r/base/Paren.html" class="external-link">{}</a></code>).</p></dd>
<dt>correct</dt>
<dd><p><code>[logical(1)]</code><br> Whether the user code is expected to be
<code>correct</code>. If <a href="https://rdrr.io/r/base/NULL.html" class="external-link">NULL</a>, the correctness of the user code is not checked.</p></dd>
<dt>message</dt>
<dd><p><code>[character(1)]</code><br> A string or regular expression that should
match the feedback returned for <code>user_code</code>. If <a href="https://rdrr.io/r/base/NULL.html" class="external-link">NULL</a>, the feedback
message is not checked. <code>messages</code> is passed to <code><a href="https://testthat.r-lib.org/reference/expect_match.html" class="external-link">testthat::expect_match()</a></code>
as <code>regexp</code>.</p></dd>
<dt>type</dt>
<dd><p><code>[character(1)]</code><br> The expected feedback type. Should be one of
<code>"success"</code>, <code>"info"</code>, <code>"warning"</code>, <code>"error"</code>, or <code>"custom"</code>. If <a href="https://rdrr.io/r/base/NULL.html" class="external-link">NULL</a>,
the feedback type is not checked.</p></dd>
<dt>location</dt>
<dd><p><code>[character(1)]</code><br> The expected feedback location. Should be
one of <code>"append"</code>, <code>"prepend"</code>, or <code>"replace"</code>. If <a href="https://rdrr.io/r/base/NULL.html" class="external-link">NULL</a>, the feedback
location is not checked.</p></dd>
<dt>...</dt>
<dd><p>Additional named properties of the feedback to be compared with
items of the same name in the returned feedback object.</p></dd>
<dt>perl</dt>
<dd><p>logical.  Should Perl-compatible regexps be used?</p></dd>
<dt>fixed</dt>
<dd><p>logical.  If <code>TRUE</code>, <code>pattern</code> is a string to be
    matched as is.  Overrides all conflicting arguments.</p></dd>
<dt>ignore.case</dt>
<dd><p>if <code>FALSE</code>, the pattern matching is <em>case
      sensitive</em> and if <code>TRUE</code>, case is ignored during matching.</p></dd>
<dt>.exercise</dt>
<dd><p>The exercise object. Within a <code>-tests</code> chunk, the exercise
will be found automatically and the <code>.exercise</code> argument should not be
provided. In other testing code contexts, an exercise created with
<code><a href="mock_exercise.html">mock_exercise()</a></code> can be used.</p></dd>
<dt>.envir</dt>
<dd><p><code>[environment]</code><br> The parent environment in which the
exercise should be evaluated. Only required for testing outside of a
<code>-tests</code> chunk.</p></dd>
<dt>.label</dt>
<dd><p><code>[character(1)]</code><br> A label for the expectation; by default the
exercise label will be used.</p></dd>
<dt>.evaluate_global_setup</dt>
<dd><p><code>[logical(1)]</code><br> Whether to evaluate the
global setup code for the exercise.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Invisibly returns the evaluated exercise result for <code>user_code</code>. A
list with items: <code>feedback</code>, <code>error_message</code>, <code>timeout_exceeded</code>, and
<code>html_output</code>. If the exercise includes checking code, the <code>feedback</code> item
will contain the feedback result as a list including at least the items
<code>correct</code>, <code>message</code>, <code>type</code>, and <code>location</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other exercise testing functions: 
<code><a href="test_that_exercise.html">test_that_exercise</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># Here's an example exercise where students would be asked</span></span>
<span class="r-in"><span class="co"># to subset `letters` to its first four elements. There's</span></span>
<span class="r-in"><span class="co"># some very basic checking code (but normally you'd want to</span></span>
<span class="r-in"><span class="co"># use {gradethis}).</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">ex</span> <span class="op">&lt;-</span> <span class="fu"><a href="mock_exercise.html">mock_exercise</a></span><span class="op">(</span></span>
<span class="r-in">  user_code <span class="op">=</span> <span class="st">""</span>,</span>
<span class="r-in">  solution_code <span class="op">=</span> <span class="st">"letters[1:4]"</span>,</span>
<span class="r-in">  check <span class="op">=</span> <span class="st">'</span>
<span class="r-in">  is_correct &lt;- identical(last_value, solution)</span>
<span class="r-in">  list(</span>
<span class="r-in">    correct = is_correct,</span>
<span class="r-in">    message = if (is_correct) {</span>
<span class="r-in">      "Great!"</span>
<span class="r-in">    } else if (length(last_value) != 4) {</span>
<span class="r-in">      "I expected a vector with four items."</span>
<span class="r-in">    } else {</span>
<span class="r-in">      "Try again!"</span>
<span class="r-in">    }</span>
<span class="r-in">  )</span>
<span class="r-in">  '</span>,</span>
<span class="r-in">  exercise.checker <span class="op">=</span> <span class="st">"function(last_value, check_code, solution_code, ...) {</span>
<span class="r-in">    solution &lt;- eval(parse(text = solution_code))</span>
<span class="r-in">    eval(parse(text = check_code))</span>
<span class="r-in">  }"</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># A small helper function to better preview the result from</span></span>
<span class="r-in"><span class="co"># evaluating an example user submission.</span></span>
<span class="r-in"><span class="va">preview_result</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">res</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in">  <span class="va">res</span><span class="op">$</span><span class="va">feedback</span><span class="op">$</span><span class="va">html</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">feedback</span><span class="op">$</span><span class="va">html</span><span class="op">)</span></span>
<span class="r-in">  <span class="va">res</span><span class="op">$</span><span class="va">html_output</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">html_output</span><span class="op">)</span></span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># A passing test for the correct solution</span></span>
<span class="r-in"><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">expect_feedback</span><span class="op">(</span></span>
<span class="r-in">  <span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>,</span>
<span class="r-in">  correct <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span class="r-in">  message <span class="op">=</span> <span class="st">"Great!"</span>,</span>
<span class="r-in">  .exercise <span class="op">=</span> <span class="va">ex</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"><span class="fu">preview_result</span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> List of 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ feedback        :List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ correct : logi TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ message : chr "Great!"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ type    : chr "success"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ location: chr "append"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ html    : chr "&lt;div role=\"alert\" class=\"alert alert-success\"&gt;Great!&lt;/div&gt;"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ error_message   : NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ timeout_exceeded: logi FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ html_output     : chr "\n\n\n&lt;pre&gt;&lt;code&gt;[1] &amp;quot;a&amp;quot; &amp;quot;b&amp;quot; &amp;quot;c&amp;quot; &amp;quot;d&amp;quot;&lt;/code&gt;&lt;/pre&gt;"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - attr(*, "class")= chr "learnr_exercise_result"</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># A passing test for an incorrect submission</span></span>
<span class="r-in"><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">expect_feedback</span><span class="op">(</span></span>
<span class="r-in">  <span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>,</span>
<span class="r-in">  correct <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span class="r-in">  message <span class="op">=</span> <span class="st">"four items"</span>,</span>
<span class="r-in">  .exercise <span class="op">=</span> <span class="va">ex</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"><span class="fu">preview_result</span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> List of 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ feedback        :List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ correct : logi FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ message : chr "I expected a vector with four items."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ type    : chr "error"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ location: chr "append"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ html    : chr "&lt;div role=\"alert\" class=\"alert alert-danger\"&gt;I expected a vector with four items.&lt;/div&gt;"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ error_message   : NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ timeout_exceeded: logi FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ html_output     : chr "\n\n\n&lt;pre&gt;&lt;code&gt;[1] &amp;quot;a&amp;quot; &amp;quot;b&amp;quot; &amp;quot;c&amp;quot;&lt;/code&gt;&lt;/pre&gt;"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - attr(*, "class")= chr "learnr_exercise_result"</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># A failing test for an incorrect submission</span></span>
<span class="r-in"><span class="co"># Here we were expecting a different message</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span></span>
<span class="r-in">  <span class="fu">expect_feedback</span><span class="op">(</span></span>
<span class="r-in">    <span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>,</span>
<span class="r-in">    correct <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span class="r-in">    message <span class="op">=</span> <span class="st">"Try again!"</span>,</span>
<span class="r-in">    .exercise <span class="op">=</span> <span class="va">ex</span></span>
<span class="r-in">  <span class="op">)</span>,</span>
<span class="r-in">  error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">err</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in">    <span class="co"># Downgrade the error to a regular message</span></span>
<span class="r-in">    <span class="co"># so that the error doesn't break our documentation</span></span>
<span class="r-in">    <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">conditionMessage</a></span><span class="op">(</span><span class="va">err</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">}</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Feedback `message` from 'ex' does not match "Try again!".</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Actual value: "I expected a vector with four items\."</span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p></p><p>learnr is a part of the <strong>R Markdown</strong> ecosystem of packages for creating computational documents in R. Learn more at <a href="https://rmarkdown.rstudio.com/" class="external-link">rmarkdown.rstudio.com</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Developed by <a href="https://www.garrickadenbuie.com" class="external-link">Garrick Aden-Buie</a>, <a href="http://schloerke.com/" class="external-link">Barret Schloerke</a>, JJ Allaire, <a href="https://www.rstudio.com" class="external-link"><img src="https://www.tidyverse.org/rstudio-logo.svg" alt="RStudio" width="72"></a>.</p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

  </div></footer></body></html>

